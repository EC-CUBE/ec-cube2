name: EC-CUBE2 weekly build
on:
  schedule:
     # 水曜日の 00:00 (JST) に処理を実行する
     # UTC の 15:00 は JST だと翌日の 00:00
     - cron: '0 15 * * 2'
jobs:
  build:
    name: Create Release
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v2
      - run: echo "::set-env name=REL_DATE::$(date +%Y%m%d)"
      - name: Create Release
        id: create_release
        uses: actions/create-release@v1
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }} # This token is provided by Actions, you do not need to create your own token
        with:
          tag_name: weekly/${{ env.REL_DATE }}
          release_name: EC-CUBE2 Weekly build ${{ env.REL_DATE }}
          body: |
            EC-CUBE 2.17系の Weekly build🚀 です。毎週の改善内容を反映しております。
            常に安定して動作するよう努めていますが、思わぬ不具合を取り込んでしまっている場合もあります。十分に検証の上ご利用ください。

          draft: false
          prerelease: true
